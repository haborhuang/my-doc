参考https://redis.io/topics/latency-monitor

2.8.13引入延迟监控特性：
* 在不同延迟敏感的代码中埋点
* 每个事件会有独立的时序数据记录出现的延迟激增
* 报告引擎在时序数据中抓取元数据
* 分析引擎输出可读的报告

开启监控：
```
CONFIG SET latency-monitor-threshold 100
```

指令参数为监控的阈值，单位为毫秒。超过该值的延迟事件会被记录。

# 时序数据
* 出现延迟激增时，对应的时序会记录相关信息。
* 每个时序包含160个元素。
* 每个元素包含：记录时间戳 和 事件执行时间（毫秒）
* 同一秒内同一个事件出现多次延迟激增时，数据会被合并，保留最大延迟。也就是说每秒最多会有一条记录。
* 每个元素的all-time的延迟最大值会被记录。

# 事件
command: regular commands.
fast-command: O(1) and O(log N) commands.
fork: the fork(2) system call.
rdb-unlink-temp-file: the unlink(2) system call.
aof-write: writing to the AOF - a catchall event fsync(2) system calls.
aof-fsync-always: the fsync(2) system call when invoked by the appendfsync allways policy.
aof-write-pending-fsync: the fsync(2) system call when there are pending writes.
aof-write-active-child: the fsync(2) system call when performed by a child process.
aof-write-alone: the fsync(2) system call when performed by the main process.
aof-fstat: the fstat(2) system call.
aof-rename: the rename(2) system call for renaming the temporary file after completing BGREWRITEAOF.
aof-rewrite-diff-write: writing the differences accumulated while performing BGREWRITEAOF.
active-defrag-cycle: the active defragmentation cycle.
expire-cycle: the expiration cycle.
eviction-cycle: the eviction cycle.
eviction-del: deletes during the eviction cycle.

# LATENCY指令
LATENCY LATEST - returns the latest latency samples for all events.
LATENCY HISTORY - returns latency time series for a given event.
LATENCY RESET - resets latency time series data for one or more events.
LATENCY GRAPH - renders an ASCII-art graph of an event's latency samples.
LATENCY DOCTOR - replies with a human-readable latency analysis report.